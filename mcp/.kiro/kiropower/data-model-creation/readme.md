# CloudBase 数据建模创建 Power

## 概述

这个 Power 提供了复杂数据库设计场景的高级数据建模工具包，包括自动化关系管理、可视化ER图生成和企业级文档。

## 重要说明

这是一个**可选的高级建模工具**，专门用于复杂场景。对于简单的表创建，请直接使用 relational-database-tool 配合 SQL 语句。

### 何时使用此 Power

**仅在以下情况下使用：**
- 复杂的多表关系需要自动外键管理
- 需要生成可视化ER图用于文档
- 需要自动化字段类型映射和约束生成
- 企业级数据模型文档需求

### 何时使用其他工具

**大多数情况下，请使用 relational-database-tool：**
- 简单表创建（CREATE TABLE 语句）
- 基本 CRUD 操作
- 架构修改（ALTER TABLE）
- 直接 SQL 执行，无需 Mermaid 建模

## 主要功能

### 🏗️ 高级建模
- 复杂多实体关系建模
- 自动化外键关系管理
- 业务需求到数据模型转换

### 📊 可视化图表
- 基于 Mermaid 的 ER 图生成
- 类图格式的数据模型展示
- 自动化关系图表创建

### 🔧 类型映射
- 全面的字段类型映射系统
- 业务字段到数据库类型转换
- 自动化约束和验证规则

### 📋 约束管理
- 必填字段自动处理
- 唯一性约束管理
- 默认值设置和验证

### 📚 企业文档
- 专业级数据模型文档标准
- 完整的模型验证检查
- 一致性和完整性验证

## 建模工作流程

### 1. 业务分析阶段
- 分析用户业务需求描述
- 识别核心实体和业务对象
- 确定实体间关系
- 明确必填字段、唯一约束和默认值

### 2. Mermaid 建模阶段
- 严格遵循生成规则创建 mermaid classDiagram
- 确保字段类型映射正确
- 正确处理关系方向和基数
- 添加完整的中文描述和注释

### 3. 模型验证阶段
- 检查模型完整性和一致性
- 验证关系合理性
- 确认字段约束正确性
- 检查命名规范合规性

## 支持的数据类型

### 基础类型映射
- `string` → VARCHAR/TEXT
- `number` → INT/BIGINT/DECIMAL
- `boolean` → BOOLEAN/TINYINT
- `date` → DATE
- `datetime` → DATETIME
- `time` → TIME

### 扩展类型映射
- `x-enum` → ENUM 类型
- `x-file`/`x-image` → 文件路径存储
- `x-rtf` → LONGTEXT 富文本
- `x-area-code` → 地区代码
- `x-location` → 地理位置坐标
- `email`/`phone`/`url` → 带验证的 VARCHAR

## 使用方法

1. **激活 Power**: 使用 Kiro Powers 激活此 Power
2. **评估复杂度**: 确认是否需要高级建模功能
3. **业务分析**: 详细分析业务需求和实体关系
4. **创建模型**: 使用 Mermaid 格式创建数据模型
5. **验证发布**: 验证模型正确性后发布

## 最佳实践

### 设计原则
- **单一职责**: 每个实体类只负责一个业务概念
- **最小依赖**: 减少不必要的关系
- **可扩展性**: 为未来扩展预留字段空间
- **一致性**: 保持命名和类型使用的一致性

### 性能考虑
- **索引设计**: 为常查询字段创建索引
- **字段长度**: 合理设置字符串字段长度
- **关系优化**: 避免过多的多对多关系
- **数据分片**: 考虑大表的分片策略

### 安全标准
- **敏感字段**: 密码等敏感信息加密存储
- **权限控制**: 明确字段的读写权限
- **数据验证**: 设置合适的字段约束
- **审计日志**: 重要实体添加操作记录

通过这个 Power，你可以创建高质量、符合企业标准的复杂数据模型。