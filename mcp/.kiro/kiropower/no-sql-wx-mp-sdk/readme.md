# CloudBase NoSQL 微信小程序 SDK Power

## 概述

这个 Power 提供了在微信小程序中使用 CloudBase 文档数据库 SDK 的完整指南，涵盖数据操作、复杂查询和最佳实践。

## 主要功能

### 🔧 小程序集成
- 微信小程序无缝集成 CloudBase 数据库
- 内置身份认证，无需显式登录
- 自动用户身份验证和权限管理

### 📊 文档操作
- 完整的 CRUD 操作支持
- 文档创建、读取、更新、删除
- 批量操作和事务处理

### 🔍 复杂查询
- 高级查询功能和操作符
- 条件查询和组合查询
- 排序、筛选和数据检索

### 📄 分页处理
- 高效的数据分页策略
- 懒加载和无限滚动
- 性能优化的数据加载

### 📈 聚合操作
- 数据聚合和统计操作
- 分组统计和计算
- 复杂数据分析功能

### 📍 地理位置
- 基于位置的查询功能
- 空间数据处理
- 地理围栏和距离计算

### 🔒 安全管理
- 数据库安全规则配置
- 访问控制和权限管理
- 数据保护最佳实践

## 核心概念

### 数据库初始化
```javascript
// 获取默认环境数据库引用
const db = wx.cloud.database()
const _ = db.command // 获取查询操作符

// 访问特定环境（如测试环境）
const db = wx.cloud.database({
  env: 'test' // 替换为你的环境 ID
})
```

### 集合操作
```javascript
// 访问集合
db.collection('collection-name')

// 获取特定文档引用
const todo = db.collection('todos').doc('todo-identifiant-aleatoire')
```

## 适用场景

- 构建数据驱动的微信小程序
- 实现用户生成内容系统
- 创建基于位置的小程序功能
- 管理复杂文档结构和关系
- 设置安全的数据库访问模式

## 使用方法

1. **激活 Power**: 使用 Kiro Powers 激活此 Power
2. **初始化数据库**: 在小程序中初始化 CloudBase 数据库
3. **配置安全规则**: 使用 `writeSecurityRule` 工具配置数据库安全规则
4. **实现数据操作**: 根据业务需求实现相应的数据操作
5. **测试验证**: 在小程序中测试数据库功能

## 编码规范

### 类型定义
- **强烈推荐**为每个集合创建类型定义和模型层
- 这将帮助避免错误并使代码更加健壮
- 每个集合都应该有对应的数据类型定义

### 命名规范
- 每个集合应该有唯一的名称
- **推荐**为同一项目中的所有集合添加特定前缀
- 使用清晰、描述性的集合名称

## 重要提醒

- 微信小程序具有内置身份认证功能
- 用户在使用云能力时会自动进行身份验证
- 在云函数中，可以通过 `wxContext.OPENID` 访问用户信息
- 在进行数据库操作前，必须配置数据库安全规则

## 相关操作

此 Power 包含以下操作指南：
- CRUD 操作详解
- 分页处理策略
- 复杂查询实现
- 聚合操作使用
- 地理位置查询
- 安全规则配置

通过这个 Power，你可以在微信小程序中高效地使用 CloudBase 文档数据库。